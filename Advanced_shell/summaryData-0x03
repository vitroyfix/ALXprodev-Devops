#!/bin/bash
DIR="pokemon_data"
OUTPUT="pokemon_report.csv"
echo "Name,Height (m),Weight (kg)" > "$OUTPUT"
for file in $DIR/*.json; do
    name=$(jq -r '.name' "$file" | sed 's/.*/\u&/')
    height=$(jq -r '.height' "$file" | awk '{print $1/10}')
    weight=$(jq -r '.weight' "$file" | awk '{print $1/10}')
    echo "$name,$height,$weight" >> "$OUTPUT"
done
echo "CSV Report generated at: $OUTPUT"
cat "$OUTPUT"
avg_height=$(awk -F"," 'NR>1 {sum+=$2; count++} END {printf "%.2f", sum/count}' "$OUTPUT")
avg_weight=$(awk -F"," 'NR>1 {sum+=$3; count++} END {printf "%.2f", sum/count}' "$OUTPUT")
echo ""
echo "Average Height: $avg_height m"
echo "Average Weight: $avg_weight kg"
